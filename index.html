<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Otomatik Fiyat Hesaplama & Admin Panel</title>
  <style>
    /* Genel Stil */
    body {
      margin: 0;
      padding: 0;
      background: #f0f2f5;
      font-family: Arial, sans-serif;
      color: #333;
      transition: background 0.3s, color 0.3s;
    }
    /* Koyu Tema Stil - Okunabilirlik i√ßin optimize edildi */
    body.dark-theme {
      background: #121212;
      color: #e0e0e0;
    }
    body.dark-theme .main-header {
      background: #1e1e1e;
      border-bottom: 1px solid #333;
    }
    body.dark-theme .container {
      background: #1e1e1e;
      border: 1px solid #333;
    }
    body.dark-theme input,
    body.dark-theme select {
      background: #2c2c2c;
      color: #e0e0e0;
      border: 1px solid #444;
    }
    body.dark-theme button {
      background: #3a3a3a;
      color: #e0e0e0;
    }
    body.dark-theme .close-btn {
      background: #444;
      color: #e0e0e0;
    }
    body.dark-theme table,
    body.dark-theme th,
    body.dark-theme td {
      border: 1px solid #444;
    }
    body.dark-theme th {
      background: #1e1e1e;
    }
    
    /* Sadece dark-theme aktifken label'larƒ± ye≈üil ve kalƒ±n yapalƒ±m */
    body.dark-theme label {
      color: #0f0;         /* Ye≈üil */
      font-weight: bold;   /* Kalƒ±n */
    }

    /* √úst Header */
    .main-header {
      background: #e1e8ed;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid #ccc;
      flex-wrap: wrap;
    }
    .header-buttons {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
      width: 100%;
    }
    .header-buttons button {
      background: #4a90e2;
      border: none;
      padding: 10px 15px;
      color: #fff;
      font-size: 16px;
      border-radius: 4px;
      cursor: pointer;
    }
    .header-buttons button:hover {
      background: #407ec9;
    }
    /* Ye≈üil Admin Panel Butonu */
    .admin-panel-btn {
      background: #4CAF50;
    }
    .admin-panel-btn:hover {
      background: #43a047;
    }
    
    /* Yuvarlak Tema Toggle Butonu - Kenarda, k√º√ß√ºk ve simgeli */
    .theme-toggle-btn {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: none;
      background: transparent;
      font-size: 22px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    /* Ana Konteyner */
    .container {
      display: flex;
      max-width: 1600px;
      margin: 20px auto;
      padding: 20px;
      gap: 20px;
    }
    .left, .right {
      flex: 1;
      background: #fff;
      padding: 20px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    h2 {
      font-size: 28px;
      color: #4a90e2;
      border-bottom: 2px solid #4a90e2;
      padding-bottom: 8px;
      margin-bottom: 20px;
    }
    h3 {
      font-size: 22px;
      color: #4a90e2;
      margin-bottom: 10px;
    }
    label {
      display: block;
      margin-top: 15px;
      font-size: 16px;
      color: #333; /* Aydƒ±nlƒ±k temada label'lar normal renk kalsƒ±n */
    }
    input, select {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 16px;
      background: #fff;
      color: #333;
    }
    button {
      margin-top: 20px;
      padding: 10px;
      width: 100%;
      background: #4a90e2;
      border: none;
      color: #fff;
      font-size: 16px;
      border-radius: 4px;
      cursor: pointer;
    }
    button:hover {
      background: #407ec9;
    }
    .result {
      margin-top: 20px;
      font-size: 18px;
      font-weight: bold;
      text-align: center;
    }
    .green {
      color: #4CAF50;
      font-size: 20px;
      animation: blink 1s linear infinite;
    }
    @keyframes blink {
      0% { opacity: 1; }
      50% { opacity: 0.6; }
      100% { opacity: 1; }
    }
    .comment {
      color: #666;
      font-size: 16px;
      text-align: center;
      margin-top: 10px;
    }
    .currency-container {
      margin-top: 15px;
    }
    /* Malzeme Hesaplama B√∂l√ºmleri */
    .material-section {
      background: #fff;
      padding: 15px;
      margin-bottom: 15px;
      border: 1px solid #ccc;
      border-radius: 6px;
      display: none;
    }
    /* Admin Modal */
    #adminModal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 1000;
    }
    #adminContent {
      background: #fff;
      color: #333;
      width: 90%;
      max-width: 800px;
      margin: 60px auto;
      padding: 20px;
      border-radius: 6px;
      position: relative;
      max-height: 80vh;
      overflow-y: auto;
    }
    #adminContent h2, #adminContent h3 {
      color: #4a90e2;
    }
    .admin-section {
      margin-bottom: 20px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    table, th, td {
      border: 1px solid #ccc;
    }
    th, td {
      padding: 8px;
      text-align: left;
    }
    th {
      background: #f0f2f5;
    }
    .small-input {
      width: 80px;
    }
    .close-btn {
      background: #ccc;
      color: #333;
      padding: 8px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      margin-top: 20px;
    }
    .saved-message {
      color: #4CAF50;
      font-weight: bold;
      text-align: center;
      margin-top: 10px;
      display: none;
    }
    .warning {
      color: #e67e22;
      font-size: 14px;
      text-align: center;
      margin-top: 10px;
    }
    
    /* Mobil Uyumluluk */
    @media (max-width: 768px) {
      .container {
        flex-direction: column;
        padding: 10px;
      }
      .main-header {
        flex-direction: column;
        align-items: stretch;
      }
      .header-buttons {
        margin-bottom: 10px;
      }
      .theme-toggle-btn {
        align-self: center;
      }
    }
  </style>
</head>
<body>
  <!-- √úst Header -->
  <header class="main-header">
    <div class="header-buttons">
      <button onclick="window.open('https://www.tcmb.gov.tr/kurlar/kurlar_tr.html','_blank')">TCMB Kurlar</button>
      <button class="admin-panel-btn" onclick="openAdminModal()">Admin Panel</button>
    </div>
    <!-- Yuvarlak Tema Toggle Butonu (ƒ∞kon: Ay/G√ºn) -->
    <button class="theme-toggle-btn" onclick="toggleTheme()"></button>
  </header>

  <!-- Ana Konteyner -->
  <div class="container">
    <!-- Sol Panel: Otomatik Fiyat Hesaplama -->
    <div class="left">
      <h2>Otomatik Fiyat Hesaplama</h2>
      
      <label for="kg" title="Girilen kilogram deƒüeri, toplam kg fiyatƒ±nƒ± hesaplamak i√ßin kullanƒ±lƒ±r.">Toplam Kg:</label>
      <input type="number" id="kg" placeholder="Kg girin">
      
      <label for="s√ºre" title="Kesim s√ºresi dakikadƒ±r.">Kesim S√ºresi (dk):</label>
      <input type="number" id="s√ºre" placeholder="S√ºre girin">
      
      <label for="kesim_t√ºr√º" title="Kesim t√ºr√º, dakika ba≈üƒ±na $ fiyatƒ±nƒ± belirler.">Kesim T√ºr√º:</label>
      <select id="kesim_t√ºr√º">
        <!-- Admin panelden y√ºklenecek kesim t√ºrleri se√ßenekleri -->
      </select>
      
      <label for="fiber" title="5040 Fiber se√ßeneƒüi kesim fiyatƒ±nƒ± etkiler.">5040 Fiber Se√ßeneƒüi:</label>
      <select id="fiber">
        <option value="1">Yok</option>
        <option value="3">3x</option>
        <option value="4" selected>4x</option>
        <option value="6">6x</option>
      </select>
      
      <label for="yerlesim" title="Yerle≈üim karma≈üƒ±klƒ±ƒüƒ±na g√∂re fiyat artƒ±≈üƒ± uygular.">Yerle≈üim Karma≈üƒ±klƒ±k Fiyat Artƒ±≈üƒ±:</label>
      <select id="yerlesim">
        <option value="1">Yok</option>
        <option value="1.1">%10</option>
        <option value="1.2">%20</option>
        <option value="1.3">%30</option>
        <option value="1.4">%40</option>
        <option value="1.5">%50</option>
      </select>
      
      <!-- Para Birimi Se√ßimi -->
      <div class="currency-container">
        <label for="currencySelect" title="Hesaplama sonu√ßlarƒ±nƒ± g√∂r√ºnt√ºlemek i√ßin para birimi se√ßin.">Para Birimi:</label>
        <select id="currencySelect">
          <option value="USD">USD</option>
          <option value="EUR">EUR</option>
          <option value="TRY">TRY</option>
        </select>
      </div>
      
      <button onclick="hesapla()">Hesapla</button>
      <button onclick="temizle()">Temizle</button>
      
      <div class="result" id="sonuc"></div>
      <div class="result" id="toplamFiyat"></div>
      <div class="comment" id="yorum"></div>
    </div>
    
    <!-- Saƒü Panel: Malzeme Fiyat Hesaplama -->
    <div class="right">
      <h2>Malzeme Fiyat Hesaplama</h2>
      <button id="showNextMaterialBtn" onclick="showNextMaterialSection()">Bir sonraki malzeme b√∂l√ºm√ºn√º g√∂ster</button>
      
      <!-- Malzeme Hesaplama B√∂l√ºmleri (her biri ba≈ülangƒ±√ßta gizli) -->
      <div id="materialSection1" class="material-section">
        <h3>Malzeme Hesaplama 1</h3>
        <label for="malzeme_t√ºr√º1" title="Malzemenin t√ºr√ºn√º se√ßin.">Malzeme T√ºr√º:</label>
        <select id="malzeme_t√ºr√º1" onchange="document.getElementById('malzeme_fiyat1').value=this.value">
          <!-- Admin panelden y√ºklenecek malzeme se√ßenekleri -->
        </select>
        <label for="malzeme_kg1" title="Se√ßilen malzemenin kilogram miktarƒ±.">Malzeme Kg:</label>
        <input type="number" id="malzeme_kg1" placeholder="Kg girin">
        <label for="malzeme_fiyat1" title="Malzeme fiyatƒ± (USD bazlƒ±).">Malzeme Fiyatƒ± ($/kg):</label>
        <input type="number" id="malzeme_fiyat1" value="0">
        <button onclick="malzemeHesapla(1)">Malzeme Fiyatƒ± Hesapla</button>
        <div class="result" id="malzeme_sonuc1"></div>
      </div>
      
      <div id="materialSection2" class="material-section">
        <h3>Malzeme Hesaplama 2</h3>
        <label for="malzeme_t√ºr√º2" title="Malzemenin t√ºr√ºn√º se√ßin.">Malzeme T√ºr√º:</label>
        <select id="malzeme_t√ºr√º2" onchange="document.getElementById('malzeme_fiyat2').value=this.value">
          <!-- Admin panelden y√ºklenecek malzeme se√ßenekleri -->
        </select>
        <label for="malzeme_kg2" title="Se√ßilen malzemenin kilogram miktarƒ±.">Malzeme Kg:</label>
        <input type="number" id="malzeme_kg2" placeholder="Kg girin">
        <label for="malzeme_fiyat2" title="Malzeme fiyatƒ± (USD bazlƒ±).">Malzeme Fiyatƒ± ($/kg):</label>
        <input type="number" id="malzeme_fiyat2" value="0">
        <button onclick="malzemeHesapla(2)">Malzeme Fiyatƒ± Hesapla</button>
        <div class="result" id="malzeme_sonuc2"></div>
      </div>
      
      <div id="materialSection3" class="material-section">
        <h3>Malzeme Hesaplama 3</h3>
        <label for="malzeme_t√ºr√º3" title="Malzemenin t√ºr√ºn√º se√ßin.">Malzeme T√ºr√º:</label>
        <select id="malzeme_t√ºr√º3" onchange="document.getElementById('malzeme_fiyat3').value=this.value">
          <!-- Admin panelden y√ºklenecek malzeme se√ßenekleri -->
        </select>
        <label for="malzeme_kg3" title="Se√ßilen malzemenin kilogram miktarƒ±.">Malzeme Kg:</label>
        <input type="number" id="malzeme_kg3" placeholder="Kg girin">
        <label for="malzeme_fiyat3" title="Malzeme fiyatƒ± (USD bazlƒ±).">Malzeme Fiyatƒ± ($/kg):</label>
        <input type="number" id="malzeme_fiyat3" value="0">
        <button onclick="malzemeHesapla(3)">Malzeme Fiyatƒ± Hesapla</button>
        <div class="result" id="malzeme_sonuc3"></div>
      </div>
    </div>
  </div>
  
  <!-- Admin Modal -->
  <div id="adminModal">
    <div id="adminContent">
      <div id="adminLoginSection">
        <label for="adminPass" title="Admin paneline eri≈ümek i√ßin ≈üifre girin.">≈ûifre:</label>
        <input type="password" id="adminPass" placeholder="≈ûifre girin">
        <button onclick="checkAdmin()" style="color: orange;">Giri≈ü</button>
      </div>
      <div id="adminSettings" style="display:none;">
        <div class="warning">Not: Tarayƒ±cƒ± verileri silinirse t√ºm ayarlar sƒ±fƒ±rlanƒ±r!</div>
        <div class="admin-section">
          <h3>Genel Fiyat Parametreleri</h3>
          <label for="admin_kgPriceFactor" title="Kg ba≈üƒ±na fiyat fakt√∂r√º (USD bazlƒ±).">Kg Ba≈üƒ±na Fiyat Fakt√∂r√º ($):</label>
          <input type="number" id="admin_kgPriceFactor" step="0.01">
          
          <!-- ALMG i√ßin ek alan -->
          <label for="admin_almgKgPriceFactor" title="ALMG i√ßin Kg ba≈üƒ±na fiyat fakt√∂r√º (USD bazlƒ±).">ALMG Kg Ba≈üƒ±na Fiyat Fakt√∂r√º ($):</label>
          <input type="number" id="admin_almgKgPriceFactor" step="0.01">
          
          <h4>Kesim T√ºr√º Fakt√∂rleri (Dakika ba≈üƒ±na $ fiyatƒ±)</h4>
          <table id="adminKesimTable">
            <thead>
              <tr>
                <th>Kesim T√ºr√º</th>
                <th>Fakt√∂r ($/dk)</th>
              </tr>
            </thead>
            <tbody>
              <!-- JavaScript ile doldurulacak -->
            </tbody>
          </table>
        </div>
        <div class="admin-section">
          <h3>Malzeme Fiyatlarƒ± ($/kg)</h3>
          <table id="adminMaterialTable">
            <thead>
              <tr>
                <th>Malzeme</th>
                <th>Fiyat</th>
              </tr>
            </thead>
            <tbody>
              <!-- JavaScript ile doldurulacak -->
            </tbody>
          </table>
        </div>
        <button onclick="saveAdminSettings()">Kaydet</button>
        <p class="saved-message" id="savedMessage">Fiyatlar kaydedildi!</p>
      </div>
      <button class="close-btn" onclick="closeAdminModal()">Kapat</button>
    </div>
  </div>
  
  <script>
    // √áoklu para birimi desteƒüi
    const currencyRates = {
      'USD': 1,
      'EUR': 0.9,
      'TRY': 20
    };
    const currencySymbols = {
      'USD': '$',
      'EUR': '‚Ç¨',
      'TRY': '‚Ç∫'
    };

    // Varsayƒ±lan parametreler
    const defaultParameters = {
      kgPriceFactor: 0.36,
      almgKgPriceFactor: 0.30,
      // Kesim t√ºr√º fakt√∂rleri (dakika ba≈üƒ±na fiyat)
      kesimFactors: {
        'Paslanmaz √áelik': 2.0,
        'Siyah Sa√ß': 1.75,
        'ALMG Kesim': 2.0,
        'Bakƒ±r': 2.3,
        'Pirin√ß': 2.0,
        'Galvaniz': 1.5
      },
      fiberDefault: 4,
      yerlesimDefault: 1,
      materialPrices: {
        'Siyah': 1.20,
        'Paslanmaz 304': 4.00,
        'Paslanmaz 316': 5.00,
        'Paslanmaz 309': 6.00,
        'Paslanmaz 310': 8.25,
        'Paslanmaz 321': 5.50,
        'Paslanmaz 430': 4.00,
        'Al√ºminyum (5083 kalite)': 6.50,
        'Al√ºminyum (1050 kalite)': 4.50,
        'Al√ºminyum (5754 kalite)': 5.50,
        'Hardox': 4.25,
        'Galvaniz': 1.25,
        'Pirin√ß': 14.50,
        'Bakƒ±r': 16.00
      }
    };

    // Global parametre nesnesi (localStorage'dan y√ºklenecek veya varsayƒ±lanlar kullanƒ±lacak)
    let parameters = {};

    // Global base price ve malzeme hesaplamalarƒ± i√ßin toplamlar
    let basePrice = 0;
    let materialTotals = {1: 0, 2: 0, 3: 0};

    // Malzeme b√∂l√ºmlerinin ka√ß tanesinin g√∂r√ºn√ºr olduƒüunu tutan saya√ß
    let visibleMaterialSections = 0;

    // LocalStorage‚Äôdan parametreleri y√ºkle; yoksa varsayƒ±lanlarƒ± kullan
    function loadParameters() {
      const stored = localStorage.getItem("pricingParameters");
      if (stored) {
        parameters = JSON.parse(stored);
      } else {
        parameters = defaultParameters;
      }
    }

    // Parametreleri localStorage‚Äôa kaydet
    function saveParameters() {
      localStorage.setItem("pricingParameters", JSON.stringify(parameters));
    }

    // Sol paneldeki "kesim_t√ºr√º" ve saƒü paneldeki "malzeme_t√ºr√º" se√ßeneklerini g√ºncelle
    function updateSelectOptions() {
      // Kesim t√ºrleri
      const kesimSelect = document.getElementById("kesim_t√ºr√º");
      kesimSelect.innerHTML = "";
      for (let type in parameters.kesimFactors) {
        let opt = document.createElement("option");
        opt.value = parameters.kesimFactors[type];
        opt.innerText = type;
        kesimSelect.appendChild(opt);
      }
      // Fiber ve yerle≈üim dropdown varsayƒ±lanlarƒ±
      document.getElementById("fiber").value = parameters.fiberDefault;
      document.getElementById("yerlesim").value = parameters.yerlesimDefault;
      
      // Malzeme t√ºrleri i√ßin (her 3 b√∂l√ºm i√ßin)
      const updateMaterialSelect = (selectId) => {
        const materialSelect = document.getElementById(selectId);
        materialSelect.innerHTML = "";
        for (let material in parameters.materialPrices) {
          let opt = document.createElement("option");
          opt.value = parameters.materialPrices[material];
          opt.innerText = material;
          materialSelect.appendChild(opt);
        }
      };
      updateMaterialSelect("malzeme_t√ºr√º1");
      updateMaterialSelect("malzeme_t√ºr√º2");
      updateMaterialSelect("malzeme_t√ºr√º3");
    }

    // Hesaplama Fonksiyonlarƒ±
    function hesapla() {
      let kg = parseFloat(document.getElementById("kg").value) || 0;
      let s√ºre = parseFloat(document.getElementById("s√ºre").value) || 0;
      let kesimFaktor = parseFloat(document.getElementById("kesim_t√ºr√º").value);
      let fiberCarpan = parseFloat(document.getElementById("fiber").value);
      let yerlesimCarpan = parseFloat(document.getElementById("yerlesim").value);

      // Se√ßilen kesim t√ºr√ºn√ºn adƒ±nƒ± alalƒ±m
      let kesimSelect = document.getElementById("kesim_t√ºr√º");
      let kesimType = kesimSelect.options[kesimSelect.selectedIndex].text;

      // Eƒüer ALMG Kesim se√ßilmi≈üse, farklƒ± kg fiyat fakt√∂r√º uygula
      let kgPriceFactor = parameters.kgPriceFactor;
      if (kesimType === "ALMG Kesim") {
        kgPriceFactor = parameters.almgKgPriceFactor;
      }

      let kgFiyat = kg * kgPriceFactor;
      let s√ºreFiyat = s√ºre * kesimFaktor * fiberCarpan;
      let maxFiyat = (kgFiyat > s√ºreFiyat ? kgFiyat : s√ºreFiyat);
      maxFiyat = maxFiyat * yerlesimCarpan; // Yerle≈üim artƒ±≈üƒ± uygulanƒ±yor
      let ortalamaFiyat = (kgFiyat * 0.60) + (s√ºreFiyat * 0.40);
      basePrice = maxFiyat; // global base price
      
      document.getElementById("yorum").innerHTML = `Kg fiyatƒ±: $${kgFiyat.toFixed(2)}, S√ºre fiyatƒ±: $${s√ºreFiyat.toFixed(2)}<br>Ortalama: $${ortalamaFiyat.toFixed(2)}`;
      document.getElementById("sonuc").innerHTML = `Kg Fiyatƒ±: $${kgFiyat.toFixed(2)}<br>S√ºre Fiyatƒ±: $${s√ºreFiyat.toFixed(2)}`;
      updateOverallTotal();
    }

    function updateOverallTotal() {
      let totalMaterials = materialTotals[1] + materialTotals[2] + materialTotals[3];
      let overall = basePrice + totalMaterials;
      const currency = document.getElementById("currencySelect").value;
      const rate = currencyRates[currency] || 1;
      const symbol = currencySymbols[currency] || '$';
      let convertedBase = basePrice * rate;
      let convertedOverall = overall * rate;
      document.getElementById("toplamFiyat").innerHTML = `<strong>En Y√ºksek Fiyat: ${symbol}${convertedBase.toFixed(2)}</strong><br><strong class="green">Toplam (Malzeme Dahil): ${symbol}${convertedOverall.toFixed(2)}</strong>`;
    }

    function malzemeHesapla(index) {
      let kg = parseFloat(document.getElementById("malzeme_kg" + index).value) || 0;
      let enteredPrice = parseFloat(document.getElementById("malzeme_fiyat" + index).value);
      let selectedPrice = parseFloat(document.getElementById("malzeme_t√ºr√º" + index).value);
      let price = (enteredPrice === 0 ? selectedPrice : enteredPrice);
      let total = kg * price;
      materialTotals[index] = total;
      document.getElementById("malzeme_sonuc" + index).innerHTML = `Malzeme Fiyatƒ±: $${total.toFixed(2)}`;
      updateOverallTotal();
    }

    function temizle() {
      document.getElementById("kg").value = "";
      document.getElementById("s√ºre").value = "";
      document.getElementById("sonuc").innerHTML = "";
      document.getElementById("toplamFiyat").innerHTML = "";
      document.getElementById("yorum").innerHTML = "";
      for(let i = 1; i <= 3; i++) {
        document.getElementById("malzeme_kg" + i).value = "";
        document.getElementById("malzeme_fiyat" + i).value = "";
        document.getElementById("malzeme_sonuc" + i).innerHTML = "";
      }
      basePrice = 0;
      materialTotals = {1: 0, 2: 0, 3: 0};
    }

    // Malzeme b√∂l√ºmlerini sƒ±rayla a√ßan fonksiyon
    function showNextMaterialSection() {
      if (visibleMaterialSections < 3) {
        visibleMaterialSections++;
        document.getElementById("materialSection" + visibleMaterialSections).style.display = "block";
        if (visibleMaterialSections === 3) {
          document.getElementById("showNextMaterialBtn").disabled = true;
          document.getElementById("showNextMaterialBtn").innerText = "T√ºm b√∂l√ºmler g√∂sterildi";
        }
      }
    }

    // Admin Panel Fonksiyonlarƒ±
    function openAdminModal() {
      document.getElementById("adminModal").style.display = "block";
      document.getElementById("adminLoginSection").style.display = "block";
      document.getElementById("adminSettings").style.display = "none";
    }

    function closeAdminModal() {
      document.getElementById("adminModal").style.display = "none";
      document.getElementById("adminPass").value = "";
    }

    function checkAdmin() {
      let pass = document.getElementById("adminPass").value;
      if(pass === "1905") {
        document.getElementById("adminLoginSection").style.display = "none";
        document.getElementById("adminSettings").style.display = "block";
        loadAdminSettings();
      } else {
        alert("Hatalƒ± ≈üifre!");
      }
    }

    function loadAdminSettings() {
      document.getElementById("admin_kgPriceFactor").value = parameters.kgPriceFactor;
      document.getElementById("admin_almgKgPriceFactor").value = parameters.almgKgPriceFactor;
      const kesimTableBody = document.querySelector("#adminKesimTable tbody");
      kesimTableBody.innerHTML = "";
      for (let type in parameters.kesimFactors) {
        let row = document.createElement("tr");
        let cellType = document.createElement("td");
        cellType.innerText = type;
        let cellInput = document.createElement("td");
        let input = document.createElement("input");
        input.type = "number";
        input.step = "0.01";
        input.className = "small-input";
        input.value = parameters.kesimFactors[type];
        input.id = "admin_kesim_" + type.replace(/\s/g, "_");
        input.title = "Dakika ba≈üƒ±na $ fiyatƒ±";
        cellInput.appendChild(input);
        row.appendChild(cellType);
        row.appendChild(cellInput);
        kesimTableBody.appendChild(row);
      }
      
      const materialTableBody = document.querySelector("#adminMaterialTable tbody");
      materialTableBody.innerHTML = "";
      for (let material in parameters.materialPrices) {
        let row = document.createElement("tr");
        let cellMaterial = document.createElement("td");
        cellMaterial.innerText = material;
        let cellInput = document.createElement("td");
        let input = document.createElement("input");
        input.type = "number";
        input.step = "0.01";
        input.className = "small-input";
        input.value = parameters.materialPrices[material];
        input.id = "admin_material_" + material.replace(/\s/g, "_");
        input.title = "Malzeme fiyatƒ± (USD bazlƒ±)";
        cellInput.appendChild(input);
        row.appendChild(cellMaterial);
        row.appendChild(cellInput);
        materialTableBody.appendChild(row);
      }
    }

    function saveAdminSettings() {
      parameters.kgPriceFactor = parseFloat(document.getElementById("admin_kgPriceFactor").value) || parameters.kgPriceFactor;
      parameters.almgKgPriceFactor = parseFloat(document.getElementById("admin_almgKgPriceFactor").value) || parameters.almgKgPriceFactor;
      for (let type in parameters.kesimFactors) {
        let inputVal = parseFloat(document.getElementById("admin_kesim_" + type.replace(/\s/g, "_")).value);
        if(!isNaN(inputVal)) {
          parameters.kesimFactors[type] = inputVal;
        }
      }
      for (let material in parameters.materialPrices) {
        let inputVal = parseFloat(document.getElementById("admin_material_" + material.replace(/\s/g, "_")).value);
        if(!isNaN(inputVal)) {
          parameters.materialPrices[material] = inputVal;
        }
      }
      saveParameters();
      updateSelectOptions();
      const savedMsg = document.getElementById("savedMessage");
      savedMsg.style.display = "block";
      setTimeout(() => { savedMsg.style.display = "none"; }, 2000);
    }

    // Tema Toggle Fonksiyonu ve ƒ∞kon G√ºncellemesi
    function updateThemeIcon() {
      const btn = document.querySelector(".theme-toggle-btn");
      if(document.body.classList.contains("dark-theme")){
         btn.innerHTML = "‚òÄÔ∏è"; // Aydƒ±nlƒ±k moda ge√ßmek i√ßin g√ºne≈ü ikonu
      } else {
         btn.innerHTML = "üåô"; // Koyu mod i√ßin ay ikonu
      }
    }

    function toggleTheme() {
      document.body.classList.toggle("dark-theme");
      if(document.body.classList.contains("dark-theme")){
        localStorage.setItem("theme", "dark");
      } else {
        localStorage.setItem("theme", "light");
      }
      updateThemeIcon();
    }

    // Sayfa y√ºklenince tema bilgisini kontrol et
    window.onload = function() {
      loadParameters();
      updateSelectOptions();
      const savedTheme = localStorage.getItem("theme");
      if(savedTheme === "dark") {
        document.body.classList.add("dark-theme");
      }
      updateThemeIcon();
    }

    // Para birimi se√ßimi deƒüi≈üince hesaplamayƒ± g√ºncelle
    document.getElementById("currencySelect").addEventListener("change", updateOverallTotal);
  </script>
</body>
</html>
